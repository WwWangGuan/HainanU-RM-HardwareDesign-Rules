# 题外话
1. 禁止调试器直接给STM32供电，会造成GPIO推挽能力不足，譬如串口出现三角波。
2. 谁在tm把串口画反了就都鲨了😡
3. 画板子的不跑DRC和写程序不编译拿过来用的都一样傻逼。
4. MOS管的GS下拉电阻一定要留！
[图片]
5. 焊接上的问题，要么多练，要么铐打一下自己的设计为啥焊起来这么阴间。
6. 焊完之后请务必像揍儿子一样测试你的板子，对测试不狠心后面出的bug要是不让你破防都对不起你。
# 设计流程
1. 每个PCB设计都需有对应的设计文档，需包含设计需求，设计要求等。
2. 请首先确定机械板框与外壳
3. 确定之后进行器件选型与元器件库文件云端上传，请参照相关工程规则与封装规则。
4. 原理图设计请务必在文档内写清，抄datasheet也得知道在哪抄。
5. Layout务必请参照下方规则。
6. 当完成Layout后，请按照设计规则自查，自行导出为表格通过打对勾的形式，每次查版务必提交此文件。
7. 对于主控板设计 以stm32为例，原理图第一页必须给出cubemx引脚配置截图和电源网络分配图。
8. 对于可能出现的改版设计，应在最一开始时考虑到，如便携装甲板的定时器问题，假如引脚资源充足，应当冗余一个定时器以防万一。
9. 开始画外围电路之前为什么不看看神奇的IC 结构框图和Typical Applications喵？
# 器件选型规则
1. 电容耐压值至少为目标电压的150%及以上，建议参考官方直流偏置图像后再确定。
2. 电感温升电流和饱和电流取较小值作为参考，不得低于DCDC峰值电流+纹波电流的一半，建议冗余20%。
## 常用电容耐压与容量规格
|耐压|最小封装 |容值 |材质 |精度|
|-----|-----|----|----|----|----|
|25V |0805 |10uF |X7R |±10% |
3. 25V
0805
22uF
X5R
±20%
25V
1210
22uF
X7R
±10%
25V
1206
47uF
X5R
±20%
16V
0603
22uF
X5R
±20%





# 外壳与机械规则
1. 元件未动，机械先行。你画的再好机械装不上去也是白扯。
2. 如果想兼容现有的机械外壳，请至少自己拆装过一遍，确保了解机械结构后再设计板框。 
3. 如条件允许，请机械的同学先行给出2D板框外形文件后再开始布局规划，画好后到处3D STEP文件请机械同学尝试装配查看有无问题

# 工程规则
1. AD工程下原理图与PCB文件名称要与工程名称一致，如为多张原理图设计需按功能命名原理图。
2. 元器件需注明基本信息，每次在开启新的硬件设计之前先在AD空间内创建对应元件，电容应标明容量与耐压值，电感应注明感值与最大通过电流，以此类推
3. 在板框层设定中，需用Keep out层与机械1层各画一层板框。
4. 请在板框外侧标注出板子的物理尺寸，单位mm。
# 封装规则
1. 从立创导入PCB封装的时候注意一下焊盘，有些“焊盘”他是铺铜，严加注意。
2. 注意原理图封装不可画的过于抽象，手感至上。
3. 除SMT与部分datasheet强制推荐或要求0402及以下封装外禁用0402及以下封装。
4. 导入原理图库时，请用AD重画一遍边框，jlc导过来的看起来太难受了。
# ESD保护规则
1. 高速信号加入ESD保护时注意其结电容不得高于1pF。
Layout规则
# 布局规则
1. 对于多DCDC或者多电源设计，需要注意每一个电源都是热源，要注意各个模块之间的散热，布局时不能堆在一起，要一字排开。
2. 布局时要考虑焊接难度，比如说你用LQFP的芯片，外面有去耦电容，你离得太近的话，一旦芯片连锡就寄了，要考虑一下布局的方向和距离。
3. 虽然，我们崇尚的设计美学是小而精美，元件整齐排布，但是走线也是有面积的，需要权衡两者的利弊关系。
# 通用规则
1. 整板设计禁用盘中孔。
2. 整版设计中最多只能出现两种过孔（0.4*0.6/0.3*0.5/0.2*0.4（BGA）单位mm），最好整板用一种。
3. 线宽不能超过焊盘宽度，如有必要加宽请在焊盘引出一段之后再加宽。
4. 晶振与电感下的GND铜需挖掉（同层即可），且晶振的包地需要单独接到背面并与顶层地铜隔离。
5. 不允许存在死铜。
6. 凸出铜皮需删除（天线效应）或打孔。
7. 器件与丝印之间不得干涉。
8. 丝印要合理化，人性化。
9. 每个板子都要留有足够多的GND接口。
10. 若在同一位置存在相同网络的焊盘，不能直接连接，要将线引出后在连接。
11. 对于多板设计，原理图的网络要对的上，对不上就全杀了(我直接锐评港科.jpg)
# 电源规则
1. 1盎司铜厚每40mil走1A电流，必要时开窗/加过孔。
2. 上拉电阻线宽至少8mil。
3. 电源线线宽至少10mil
4. 过孔载流能力：0.4*0.6 500mA | 0.3*0.5 400mA。
5. 过孔载流能力不够时可以多打过孔，但电流并不在过孔均匀分配，打了一排过孔可能有的孔走了200mA，有的孔会走2A，因为电流在板上并不是均匀分布的，有条件的可以跑仿真，没条件的建议跟着感觉来，孔多不坏板。
6. 除GND铜外其他铜皮不可使用铺铜，必须使用实心区域或者填充。
7. 退耦电容必须放在对应器件附近，越近越好，且电流流经方向必须先经过电容再给到IC，电容GND就近打孔回流。
[图片]
8. 电容容量与摆放位置关系：大电容靠近小电容，小电容靠近IC。
9. IC背部需有用于散热的过孔，尽可能多放。
10. DCDC设计注意CIN-L-Cout回流路径最短。
11. FB采样点放在最后一个输出电容。
12. FB反馈线绕开电感。
13. DCDC输入/输出电容数量不得低于3个。
14. LDO不能直接并联，需要用电阻连接，具体阻值需计算；或者两个LDO走线阻抗保持一致可以不串联电阻，这个方法部分芯片手册会写，详情见具体手册。LDO并联理想状态下输出电流是所并联的LDO输出电流之和，走线建议按理想电流来走。
15. 电源两个以上的过孔要转换为焊盘，快捷键TVV，然后命名为VIA5，其顶部与底部必须盖油。
16. 尽可能的减小高di/dt回路面积。
17. 对于多电源的情况，尽量一字排开便于散热，不能聚集在一起。
18. 对于多层板，内电层要注意分割平面时最窄处能够通过的电流是否满足设计要求。
# 信号线规则
1. 信号线上的过孔尽量不打。
2. 请注意信号线背面平面是否完整，尽量避免跨分割。
3. 信号线线宽不低于5mil。
4. 信号线尽量不在芯片背部走线，宁可绕也不打过孔，除非没办法。
5. 若无法避免信号换层，请尽量与顶层的信号线保持垂直，减小信号间的耦合与串扰。
6. 信号线出线要保证顺畅，能拉直尽量拉直，特别是AD的交互式差分布线，几乎全部需要处理。
7. 信号线出线尽量在焊盘中心出线，禁止在边缘处乱出线。
8. 信号线之间保持一定间距，最好落实3W原则，即两个走线中心间距至少大于三倍线宽以保持70%的线间电场不互相干扰，不过一般没那么严格，低速板基本用不上这个原则，随便拉个5 6mil以上的间距差不多了。
9. 对于信号线上的终端电阻，应当靠近信号的发射端。
10. 对于差分信号绕等长问题，请使用AD自带的绕等长，切勿自行绕等长，不仅抽象而且会被喷死。
11. 对于信号线包地，包地线线宽不得低于信号线宽。
12. 电流采样应采用开尔文接法。
13. 请不要吝啬放testpoint，飞不出来线的时候一调一个不吱声。
14. 如果你不想放TP，那么你的信号线上就要有匹配电阻，哪怕只是个0R。
# 差分信号规则
## 共面差分
两层板使用，其参考地平面为同一层的GND且差分信号需要包地，须在原理图页面注明厂家与阻抗计算结果并添加差分对规则。
表示方式：
G/5/6.1/5/6.1/5/G
从左到右依次为：地线/阻抗线到铜距离/差分信号线/差分信号线线距/差分信号线/阻抗线到铜距离/地线
包地线线宽不得小于信号线线宽，最好与过孔外径相同，地线上打过孔帮助回流，打孔时注意要隔一定距离就打一个孔，如果实在不行也得在开始位置打一个。
USB3.0信号注意组内等长。
隔层参考差分（外层差分）
多层板使用，其参考地平面为下一层的GND平面。表示方法与前面相同，不一定非得要包地，但是对于信号频率类似于USB3.0的高速信号
请务必包地。
# 调试规则
1. 数控电源禁止进入Debug模式。(存疑)
2. 
# 焊接规则
## 一、空焊(Missing Solder)
### 定义：零件的PIN脚或PAD与PCB的PAD之间没有锡焊接, 称为空焊
### 影响：组件无法和PCB的PAD正常连接,导致电路不通,影响板卡功能
[图片]
### 原因：忘记上锡了
### 解决方法：上锡
## 二、少锡(Poor Solder)
### 定义：零件的PIN脚和PCBPAD有锡焊接,但未达到质量要求的吃锡标准,称为少锡
### 影响：组件的焊锡性不可靠,可能导致组件焊接不牢固,或引起电路不通,影响板卡功能
[图片]
### 原因：锡上少了
### 解决方法：上多点锡
## 三、短路(SolderShort）
### 定义：独立相邻的两个脚连接在一起称为短路
### 影响：短路会导致不同的线路或组件短接,导致电流过大,影响线路正常功能,甚至烧板
[图片]
### 原因：焊接的时候锡给多了，两个焊盘粘连在一起
###解决方法：擦去烙铁头上多余的锡后用烙铁头对粘连的地方进行刮擦
## 四、拒焊(NegativeSolder)
### 定义：零件的PAD/PIN与PCB板的PAD没有良好的焊接或无法吃锡,称为拒焊
### 影响：导致组件的焊接可靠度下降,影响组件及线路正常的连接,影响板卡正常功能
[图片]
### 原因：烙铁停留在焊盘时间过长，损坏了焊盘或焊盘长期暴露在空气中氧化了
### 解决方法：上助焊膏进行焊接，如果没有效果说明氧化得很彻底，没救了，换一块板子吧
## 五、墓碑(Tombstone)
### 定义：零件的一端焊接良好,另一端未焊接且与PCB的PAD脱离并立起,称为墓碑/立碑
### 影响：组件无法和PCB的PAD正常连接，导致电路不通,影响板卡功能
[图片]
### 原因：在一端上锡过多，并且焊接的时候手抖了，焊锡由于应力上拉造成元件立碑
### 解决方法：擦去烙铁头多余的锡后融化焊锡将元件取下，再对焊盘进行刮擦刮去多余焊锡
## 六、反白(Upturned)
### 定义：表面有丝印的组件贴装时丝印面朝下贴在PCB板上,称为反白
### 影响：影响产品的外观,由于文字面朝下无法目检确认是否使用正确的物料
[图片]
### 原因：眼睛没注意
### 解决方法：拆了重焊了呗
## 七、位移(Offset)
### 定义：组件的PAD/PIN与PCB的PAD未对准,超出零件宽度的2/1,称为位移
### 影响：影响产品的外观,组件的焊锡可靠度降低,可能会导致板卡的电性不良
[图片]
### 原因：手抖了
### 解决方法：拆了重焊呗
## 八、锡珠/渣(Solder Ball/Solder Dreg)
### 定义：残留在PCB板上的凝聚的呈球状或不规则形状的锡,称为锡珠/渣
### 影响：影响产品的外观,影响组件的焊锡可靠度,造成潜在的短路可能性
[图片]
### 原因：烙铁头上的锡接触到了板子上并有轻微的刮蹭
### 解决方法：扣下来，或者刮回烙铁上
## 九、浮高(Float)
### 定义：组件在焊锡或组装时不能紧贴PCB板的现象,称为浮高
### 影响：Chip组件浮高易导致撞件,连接器浮高会对整个产品的组装造成不良
[图片]
### 原因：两边焊盘上锡太多或者单边上锡太多
### 解决方法：同第五点
# 焊线规则
1. 焊接电源线与XT电源头是请务必疯狂堆锡，最后一定一定一定要把热缩管推到最上面去！！！！
2. 